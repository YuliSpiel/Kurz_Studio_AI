# Kurz AI Studio

## LLM Agent ê¸°ë°˜ AI ìˆí¼ ì˜ìƒ ìë™ ì œì‘ ì„œë¹„ìŠ¤

Kurz AI StudioëŠ” ì‚¬ìš©ì í”„ë¡¬í”„íŠ¸ë¥¼ ì…ë ¥ë°›ì•„ ìŠ¤í† ë¦¬ ê¸°íš, ì´ë¯¸ì§€ ìƒì„±, ìŒì„± í•©ì„±, ë°°ê²½ìŒì•… ì‘ê³¡, ì˜ìƒ í•©ì„±ê¹Œì§€ ì™„ì „ ìë™ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” AI ê¸°ë°˜ ìˆí¼ ì˜ìƒ ì œì‘ íŒŒì´í”„ë¼ì¸ì…ë‹ˆë‹¤.

**[ë°ëª¨ ì˜ìƒ ë³´ê¸°](https://youtu.be/9BYbdmK_lzg)**

---

## ëª©ì°¨

- [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
- [ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
- [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
- [ì‹œì‘í•˜ê¸°](#ì‹œì‘í•˜ê¸°)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#í”„ë¡œì íŠ¸-êµ¬ì¡°)
- [ì›Œí¬í”Œë¡œìš°](#ì›Œí¬í”Œë¡œìš°)
- [ëª¨ë“œë³„ íŠ¹ì§•](#ëª¨ë“œë³„-íŠ¹ì§•)
- [ìµœì‹  ì—…ë°ì´íŠ¸](#ìµœì‹ -ì—…ë°ì´íŠ¸)
- [ë¬¸ì„œí™”](#ë¬¸ì„œí™”)

---

## í”„ë¡œì íŠ¸ ê°œìš”

### ì£¼ì œ
**LLM Agent ê¸°ë°˜ AI ìˆí¼ ì˜ìƒ ìë™ ì œì‘ ì„œë¹„ìŠ¤**

### ë°°ê²½
- ìˆí¼ ì½˜í…ì¸  ìˆ˜ìš” ê¸‰ì¦: YouTube Shorts, Instagram Reels, TikTok ë“±
- ì˜ìƒ ì œì‘ì— í•„ìš”í•œ ê¸°íš, ë””ìì¸, í¸ì§‘, ì„±ìš°, ìŒì•… ì‘ì—…ì˜ ì‹œê°„/ë¹„ìš© ë¶€ë‹´
- Gemini, ElevenLabs ë“± ìƒì„±í˜• AI ê¸°ìˆ ì˜ ë°œì „

### í•µì‹¬ ëª©í‘œ
1. **í”„ë¡¬í”„íŠ¸ â†’ ì™„ì„± ì˜ìƒ** ì›ìŠ¤í†± ìë™í™”
2. **ë‹¤ì¤‘ Agent í˜‘ì—…** êµ¬ì¡°: ê¸°íšì â†’ ë””ìì´ë„ˆ, ì‘ê³¡ê°€, ì„±ìš° â†’ ê°ë… â†’ QA
3. **3ê°€ì§€ ëª¨ë“œ ì§€ì›**: Story Mode (ìºë¦­í„° ì¤‘ì‹¬), General Mode (ì¼ë°˜ ì˜ìƒ), Ad Mode (ê´‘ê³ )
4. **í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜**: ëª¨ë“ˆí˜• ì„¤ê³„ + Celery ë¹„ë™ê¸° ì²˜ë¦¬
5. **ì‚¬ìš©ì ì¸ì¦ ë° ë°ì´í„° ê´€ë¦¬**: PostgreSQL ê¸°ë°˜ ë©€í‹° ìœ ì € ì§€ì›

---

## ì£¼ìš” ê¸°ëŠ¥

~~### 1. Story Mode (ìŠ¤í† ë¦¬ ëª¨ë“œ)~~
- ~~ì‚¬ìš©ìê°€ ìºë¦­í„°ë¥¼ ì •ì˜í•˜ê³  ìŠ¤í† ë¦¬ ì§„í–‰~~
- ~~ìºë¦­í„° ì´ˆìƒí™”(2:3) + ë°°ê²½ ì´ë¯¸ì§€(9:16) ë¶„ë¦¬ ë Œë”ë§~~
- ~~ë°°ê²½ íˆ¬ëª…í™”(rembg) ì ìš©~~
- ~~ìºë¦­í„°ë³„ ìŒì„±, í‘œì •, í¬ì¦ˆ ì œì–´~~

### 2. General Mode (ì¼ë°˜ ëª¨ë“œ)
- í”„ë¡¬í”„íŠ¸ë§Œìœ¼ë¡œ ìë™ ì‹œë‚˜ë¦¬ì˜¤ ìƒì„±
- ì •ë°©í˜•(1:1, 1080x1080) í†µí•© ì´ë¯¸ì§€ ìƒì„±
- ë°±ìƒ‰ ë°°ê²½ + íˆ¬ëª…í™” ì—†ìŒ
- ê°„ê²°í•œ ìŠ¤í‚¤ë§ˆë¡œ ë¹ ë¥¸ ìƒì„±
- AI ê¸°ë°˜ í”„ë¡¬í”„íŠ¸ í–¥ìƒ ê¸°ëŠ¥

### 3. Ad Mode (ê´‘ê³  ëª¨ë“œ)
- ì œí’ˆ/ì„œë¹„ìŠ¤ í™ë³´ìš© ì˜ìƒ ìƒì„±
- General Modeì™€ ë™ì¼í•œ íŒŒì´í”„ë¼ì¸
- ê´‘ê³  íŠ¹í™” í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§

### 4. ìë™í™”ëœ Asset ìƒì„±
- **ì´ë¯¸ì§€**: Google Gemini Flash 2.5 Image (nanobanana)
- **ìŒì„±**: ElevenLabs TTS (í•œêµ­ì–´ ì§€ì›)
- **ë°°ê²½ìŒì•…**: ElevenLabs Sound Effects
- **ì˜ìƒ í•©ì„±**: FFmpeg ê¸°ë°˜ ê³ ì† ë Œë”ë§ (9:16 ì„¸ë¡œí˜•, 30fps)

### 5. ì‚¬ìš©ì ê´€ë¦¬ ë° ì¸ì¦
- JWT ê¸°ë°˜ ì‚¬ìš©ì ì¸ì¦
- PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì‚¬ìš©ì/í”„ë¡œì íŠ¸ ê´€ë¦¬
- ì‚¬ìš©ìë³„ ì˜ìƒ ìƒì„± ì´ë ¥ ì¶”ì 
- ì†Œìœ ê¶Œ ê¸°ë°˜ ì ‘ê·¼ ì œì–´

### 6. QA Agent
- ìƒì„±ëœ ì˜ìƒ ìë™ ê²€ìˆ˜
- ì˜¤ë””ì˜¤/ë¹„ë””ì˜¤ í’ˆì§ˆ ì²´í¬
- ì‹¤íŒ¨ ì‹œ ìë™ ì¬ìƒì„± ë¡œì§

---

## ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **Framework**: FastAPI (Python 3.11+)
- **Task Queue**: Celery + Redis (gevent pool, concurrency=10)
- **Database**: PostgreSQL 16 + SQLAlchemy 2.0 (async)
- **Migration**: Alembic
- **Authentication**: JWT (python-jose)
- **LLM**: Google Gemini 2.5 Flash
- **Image Generation**: Google Gemini Flash 2.0 Experimental (Imagen 3)
- **TTS**: ElevenLabs API
- **Music**: ElevenLabs Sound Effects
- **Video Rendering**: FFmpeg (í•˜ë“œì›¨ì–´ ê°€ì† ì§€ì›)
- **State Management**: Redis (FSM ì €ì¥)
- **Background Removal**: rembg (U2Net)

### Frontend
- **Framework**: React 18 + TypeScript + Vite
- **UI**: Tailwind CSS
- **State Management**: React Context API
- **Authentication**: JWT Token ê¸°ë°˜
- **Real-time**: WebSocket (progress updates)
- **Routing**: React Router v6

### Infrastructure
- **Database**: PostgreSQL 16
- **Queue Broker**: Redis 7
- **Storage**: Local filesystem (app/data/outputs)
- **Video Codec**: H.264 (libx264)
- **Audio Codec**: AAC (192kbps)

---

## ğŸš€ ì‹œì‘í•˜ê¸°

### í•„ìˆ˜ ìš”êµ¬ì‚¬í•­
- **Python 3.11 ì´ìƒ**
- **Node.js 18 ì´ìƒ**
- **PostgreSQL 16** (ë°ì´í„°ë² ì´ìŠ¤)
- **Redis Server** (ì‘ì—… í)
- **FFmpeg** (ì˜ìƒ ë Œë”ë§)
- **API Keys**:
  - Google Gemini API Key (2.5 Flash + Flash 2.0 Experimental)
  - ElevenLabs API Key (TTS + Music)

### ì„¤ì¹˜ ë° ì‹¤í–‰

#### 1. ì €ì¥ì†Œ í´ë¡ 
```bash
git clone <repository_url>
cd Kurz_Studio_AI
```

#### 2. PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
```bash
# macOS (Homebrew)
brew install postgresql@16
brew services start postgresql@16

# ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
createdb kurz_studio_ai

# ë˜ëŠ” psqlë¡œ ì§ì ‘ ìƒì„±
psql postgres
CREATE DATABASE kurz_studio_ai;
\q
```

#### 3. Backend ì„¤ì •
```bash
cd backend

# ê°€ìƒí™˜ê²½ ìƒì„± (kvenv ì´ë¦„ ì‚¬ìš©)
python -m venv kvenv
source kvenv/bin/activate  # Windows: kvenv\Scripts\activate

# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
# .env íŒŒì¼ í¸ì§‘í•˜ì—¬ API í‚¤ ë° ë°ì´í„°ë² ì´ìŠ¤ URL ì…ë ¥
```

**.env ì˜ˆì‹œ**:
```bash
# Database
DATABASE_URL=postgresql+asyncpg://username:password@localhost:5432/kurz_studio_ai

# API Keys
GEMINI_API_KEY=your_gemini_api_key
ELEVENLABS_API_KEY=your_elevenlabs_api_key

# JWT Secret (ëœë¤ ìƒì„± ê¶Œì¥)
SECRET_KEY=your-secret-key-here

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379
```

#### 4. ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
```bash
cd backend
source kvenv/bin/activate

# Alembic ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
alembic upgrade head
```

#### 5. FFmpeg ì„¤ì¹˜
```bash
# macOS (Homebrew)
brew install ffmpeg

# Ubuntu/Debian
sudo apt-get install ffmpeg

# Windows (Chocolatey)
choco install ffmpeg
```

#### 6. Redis ì‹¤í–‰
```bash
# macOS (Homebrew)
brew install redis
brew services start redis

# Ubuntu/Debian
sudo apt-get install redis-server
sudo systemctl start redis

# Docker
docker run -d -p 6379:6379 redis:latest
```

#### 7. Celery Worker ì‹¤í–‰
```bash
# Terminal 1: Celery Worker
cd backend
source kvenv/bin/activate
celery -A app.celery_app worker --loglevel=info --pool=gevent --concurrency=10
```

#### 8. FastAPI ì„œë²„ ì‹¤í–‰
```bash
# Terminal 2: Backend Server
cd backend
source kvenv/bin/activate
uvicorn app.main:app --reload --port 8000
```

#### 9. Frontend ì‹¤í–‰
```bash
# Terminal 3: Frontend Dev Server
cd frontend
npm install
npm run dev
```

#### 10. ì ‘ì†
- **Frontend**: http://localhost:5173
- **Backend API**: http://localhost:8000
- **API Docs**: http://localhost:8000/docs
- **Database**: PostgreSQL on port 5432

---

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
Kurz_Studio_AI/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ alembic/                       # Database migrations
â”‚   â”‚   â”œâ”€â”€ versions/                  # Migration scripts
â”‚   â”‚   â””â”€â”€ env.py                     # Alembic config
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ main.py                    # FastAPI entry point
â”‚   â”‚   â”œâ”€â”€ config.py                  # Environment config
â”‚   â”‚   â”œâ”€â”€ celery_app.py              # Celery configuration
â”‚   â”‚   â”œâ”€â”€ database.py                # SQLAlchemy setup
â”‚   â”‚   â”œâ”€â”€ models/                    # SQLAlchemy models
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py                # User model
â”‚   â”‚   â”‚   â””â”€â”€ run.py                 # Run model
â”‚   â”‚   â”œâ”€â”€ routers/                   # API routers
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py                # Authentication endpoints
â”‚   â”‚   â”‚   â””â”€â”€ runs.py                # Run management endpoints
â”‚   â”‚   â”œâ”€â”€ schemas/                   # Pydantic schemas
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py                # User schemas
â”‚   â”‚   â”‚   â””â”€â”€ run_spec.py            # Run specification schemas
â”‚   â”‚   â”œâ”€â”€ orchestrator/
â”‚   â”‚   â”‚   â””â”€â”€ fsm.py                 # Finite State Machine
â”‚   â”‚   â”œâ”€â”€ tasks/
â”‚   â”‚   â”‚   â”œâ”€â”€ plan.py                # ê¸°íšì Agent (Plot ìƒì„±)
â”‚   â”‚   â”‚   â”œâ”€â”€ designer.py            # ë””ìì´ë„ˆ Agent (ì´ë¯¸ì§€ ìƒì„±)
â”‚   â”‚   â”‚   â”œâ”€â”€ composer.py            # ì‘ê³¡ê°€ Agent (BGM ìƒì„±)
â”‚   â”‚   â”‚   â”œâ”€â”€ voice.py               # ì„±ìš° Agent (TTS)
â”‚   â”‚   â”‚   â”œâ”€â”€ director.py            # ê°ë… Agent (FFmpeg ë Œë”ë§)
â”‚   â”‚   â”‚   â””â”€â”€ qa.py                  # QA Agent (í’ˆì§ˆ ê²€ìˆ˜)
â”‚   â”‚   â”œâ”€â”€ providers/
â”‚   â”‚   â”‚   â”œâ”€â”€ llm/                   # Gemini 2.5 Flash client
â”‚   â”‚   â”‚   â”œâ”€â”€ image/                 # Gemini Flash 2.0 image generation
â”‚   â”‚   â”‚   â”œâ”€â”€ tts/                   # ElevenLabs TTS
â”‚   â”‚   â”‚   â””â”€â”€ music/                 # ElevenLabs Music
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ plot_generator.py      # LLM ê¸°ë°˜ plot ìƒì„±
â”‚   â”‚   â”‚   â”œâ”€â”€ json_converter.py      # plot.json â†’ layout.json ë³€í™˜
â”‚   â”‚   â”‚   â”œâ”€â”€ ffmpeg_renderer.py     # FFmpeg ê¸°ë°˜ ì˜ìƒ ë Œë”ë§
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py                # JWT ì¸ì¦ ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”‚   â”œâ”€â”€ security.py            # ë¹„ë°€ë²ˆí˜¸ í•´ì‹±
â”‚   â”‚   â”‚   â””â”€â”€ progress.py            # ì§„í–‰ë¥  publish
â”‚   â”‚   â””â”€â”€ data/
â”‚   â”‚       â””â”€â”€ outputs/{run_id}/      # ìƒì„±ëœ íŒŒì¼ ì €ì¥
â”‚   â”‚           â”œâ”€â”€ characters.json    # ìºë¦­í„° ì •ì˜
â”‚   â”‚           â”œâ”€â”€ plot.json          # LLM ìƒì„± ì‹œë‚˜ë¦¬ì˜¤
â”‚   â”‚           â”œâ”€â”€ layout.json        # ë Œë”ë§ìš© ë ˆì´ì•„ì›ƒ
â”‚   â”‚           â”œâ”€â”€ images/            # ìƒì„±ëœ ì´ë¯¸ì§€
â”‚   â”‚           â”œâ”€â”€ audio/             # TTS + BGM
â”‚   â”‚           â”œâ”€â”€ frames/            # FFmpeg ë Œë”ë§ í”„ë ˆì„
â”‚   â”‚           â””â”€â”€ final_video.mp4    # ìµœì¢… ì˜ìƒ
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”œâ”€â”€ alembic.ini                    # Alembic configuration
â”‚   â””â”€â”€ .env.example
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.tsx                    # Main app component
â”‚   â”‚   â”œâ”€â”€ main.tsx                   # Entry point
â”‚   â”‚   â”œâ”€â”€ contexts/
â”‚   â”‚   â”‚   â””â”€â”€ AuthContext.tsx        # Authentication context
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ AuthModal.tsx          # Login/Register modal
â”‚   â”‚   â”‚   â”œâ”€â”€ HeroChat.tsx           # Chat interface
â”‚   â”‚   â”‚   â”œâ”€â”€ RunForm.tsx            # Video generation form
â”‚   â”‚   â”‚   â”œâ”€â”€ RunStatus.tsx          # Progress display
â”‚   â”‚   â”‚   â”œâ”€â”€ PlotReviewModal.tsx    # Plot review modal
â”‚   â”‚   â”‚   â”œâ”€â”€ LayoutReviewModal.tsx  # Layout review modal
â”‚   â”‚   â”‚   â””â”€â”€ Library.tsx            # User video library
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ client.ts              # API client
â”‚   â”‚   â””â”€â”€ styles/
â”‚   â”‚       â””â”€â”€ globals.css            # Global styles
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”‚
â”œâ”€â”€ voices.json                        # ElevenLabs ìŒì„± ì„¤ì •
â”œâ”€â”€ README.md
â””â”€â”€ .gitignore
```

---

## ì›Œí¬í”Œë¡œìš°

### FSM ìƒíƒœ ì „ì´ë„
```
IDLE
  â†“ (POST /api/runs)
PLOT_GENERATION (ê¸°íšì)
  â†“
PLOT_REVIEW (ì‚¬ìš©ì ê²€í† )
  â†“ (POST /api/v1/runs/{run_id}/plot-confirm)
ASSET_GENERATION (ë””ìì´ë„ˆ + ì‘ê³¡ê°€ + ì„±ìš° ë³‘ë ¬ ì²˜ë¦¬)
  â†“
RENDERING (ê°ë… - FFmpeg ë Œë”ë§)
  â†“
QA (í’ˆì§ˆ ê²€ìˆ˜)
  â†“ (í†µê³¼) / â†º (ì‹¤íŒ¨ ì‹œ ì¬ìƒì„±)
END
```

### Agentë³„ ì—­í• 

| Agent | ì—­í•  | ì…ë ¥ | ì¶œë ¥ |
|-------|------|------|------|
| **ê¸°íšì** (plan.py) | ì‹œë‚˜ë¦¬ì˜¤ ìƒì„± | prompt, mode, num_cuts | characters.json, plot.json, layout.json |
| **ë””ìì´ë„ˆ** (designer.py) | ì´ë¯¸ì§€ ìƒì„± | layout.json | images/*.png (Gemini Imagen 3) |
| **ì‘ê³¡ê°€** (composer.py) | ë°°ê²½ìŒì•… ìƒì„± | layout.json | audio/global_bgm.mp3 (ElevenLabs) |
| **ì„±ìš°** (voice.py) | ìŒì„± í•©ì„± | layout.json, characters.json | audio/{scene}_{line}.mp3 (ElevenLabs TTS) |
| **ê°ë…** (director.py) | ì˜ìƒ í•©ì„± | layout.json + assets | final_video.mp4 (FFmpeg) |
| **QA** (qa.py) | í’ˆì§ˆ ê²€ìˆ˜ | final_video.mp4 | QA report (í†µê³¼/ì¬ìƒì„±) |

---

## ëª¨ë“œë³„ íŠ¹ì§•

### General Mode / Ad Mode
**Schema (plot.json)**:
```json
{
  "title": "ì˜ìƒ ì œëª©",
  "bgm_prompt": "upbeat, cheerful, acoustic guitar",
  "scenes": [
    {
      "scene_id": "scene_1",
      "image_prompt": "ê·€ì—¬ìš´ ê³ ì–‘ì´ê°€ ì›ƒê³  ìˆëŠ” ëª¨ìŠµ, ë°ì€ ë°°ê²½",
      "text": "ì•ˆë…•í•˜ì„¸ìš”!",
      "speaker": "char_1",
      "duration_ms": 5000
    }
  ]
}
```

**íŠ¹ì§•**:
- ì •ë°©í˜• ì´ë¯¸ì§€(1:1, 1080x1080) í†µí•© ìƒì„±
- ë°±ìƒ‰ ë°°ê²½(255, 255, 255)
- íˆ¬ëª…í™” ì—†ìŒ
- `image_prompt=""`ì¼ ê²½ìš° ì´ì „ ì´ë¯¸ì§€ ì¬ì‚¬ìš©
- `bgm_prompt`ë¡œ ìƒì„¸í•œ BGM ìƒì„±
- ì„œìˆ  ë§íˆ¬ ë° í”Œë¡¯ êµ¬ì¡° ì»¤ìŠ¤í„°ë§ˆì´ì§• ì§€ì›

---

## ìµœì‹  ì—…ë°ì´íŠ¸

### v0.2 - ë°ì´í„°ë² ì´ìŠ¤ ë° FFmpeg í†µí•© (2025-01)

#### 1. ì‚¬ìš©ì ì¸ì¦ ì‹œìŠ¤í…œ
- JWT ê¸°ë°˜ ì¸ì¦ êµ¬í˜„
- íšŒì›ê°€ì…/ë¡œê·¸ì¸ ê¸°ëŠ¥
- ì‚¬ìš©ìë³„ ì˜ìƒ ìƒì„± ì´ë ¥ ê´€ë¦¬
- ì†Œìœ ê¶Œ ê¸°ë°˜ ì ‘ê·¼ ì œì–´

#### 2. PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ í†µí•©
- **User ëª¨ë¸**: ì‚¬ìš©ì ì •ë³´ ì €ì¥
  - `id`, `username`, `email`, `hashed_password`
  - `created_at`, `updated_at`
- **Run ëª¨ë¸**: ì˜ìƒ ìƒì„± ì´ë ¥ ì €ì¥
  - `run_id`, `user_id`, `mode`, `prompt`
  - `state`, `progress`, `video_url`
  - `num_cuts`, `num_characters`
- SQLAlchemy 2.0 async ì—”ì§„ ì‚¬ìš©
- Alembic ë§ˆì´ê·¸ë ˆì´ì…˜ ê´€ë¦¬

#### 3. FFmpeg ê¸°ë°˜ ê³ ì† ë Œë”ë§
- MoviePy â†’ FFmpeg ì „í™˜ìœ¼ë¡œ **10ë°° ì´ìƒ ì„±ëŠ¥ í–¥ìƒ**
- í•˜ë“œì›¨ì–´ ê°€ì† ì§€ì› (H.264 ì¸ì½”ë”©)
- í”„ë ˆì„ ë‹¨ìœ„ ë Œë”ë§ìœ¼ë¡œ ë©”ëª¨ë¦¬ íš¨ìœ¨ì„± ê°œì„ 
- Title block + Subtitle ê³ í’ˆì§ˆ ë Œë”ë§
- í•œê¸€ í°íŠ¸ ì§€ì› (Paperlogy)

#### 4. í”„ë¡¬í”„íŠ¸ í–¥ìƒ ê¸°ëŠ¥
- Gemini ê¸°ë°˜ í”„ë¡¬í”„íŠ¸ ìë™ í–¥ìƒ
- ì„œìˆ  ë§íˆ¬ ì„ íƒ (ê²©ì‹í˜•, ì¹œê·¼í•œë°˜ë§, ì§„ì§€í•œë‚˜ë ˆì´ì…˜ ë“±)
- í”Œë¡¯ êµ¬ì¡° ì„ íƒ (ê¸°ìŠ¹ì „ê²°, ê³ êµ¬ë§ˆì‚¬ì´ë‹¤, 3ë§‰êµ¬ì¡° ë“±)

#### 5. UI/UX ê°œì„ 
- ì‚¬ìš©ì ë¼ì´ë¸ŒëŸ¬ë¦¬ ê¸°ëŠ¥
- ì‹¤ì‹œê°„ ì§„í–‰ë¥  í‘œì‹œ ê°œì„ 
- Plot/Layout ê²€ìˆ˜ ëª¨ë‹¬
- ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ ì¶”ê°€

---

## ë¬¸ì„œí™”

### API ë¬¸ì„œ
- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

### ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸

#### ì¸ì¦
- `POST /api/auth/register` - íšŒì›ê°€ì…
- `POST /api/auth/login` - ë¡œê·¸ì¸
- `GET /api/auth/me` - í˜„ì¬ ì‚¬ìš©ì ì •ë³´

#### ì˜ìƒ ìƒì„±
- `POST /api/runs` - ìƒˆë¡œìš´ ì˜ìƒ ìƒì„± ì‹œì‘ (ì¸ì¦ í•„ìš”)
- `GET /api/runs/{run_id}` - ì§„í–‰ ìƒíƒœ ì¡°íšŒ
- `GET /api/v1/runs/{run_id}/plot` - Plot JSON ì¡°íšŒ
- `POST /api/v1/runs/{run_id}/plot-confirm` - Plot í™•ì¸ ë° ë‹¤ìŒ ë‹¨ê³„ ì§„í–‰ (ì¸ì¦ í•„ìš”)

#### ì‚¬ìš©ì ë¼ì´ë¸ŒëŸ¬ë¦¬
- `GET /api/v1/users/me/runs` - ë‚´ ì˜ìƒ ëª©ë¡ ì¡°íšŒ (ì¸ì¦ í•„ìš”)

### ì£¼ìš” ë°ì´í„° êµ¬ì¡°

#### characters.json
```json
{
  "characters": [
    {
      "char_id": "char_1",
      "name": "ìœ¤ì•„",
      "gender": "female",
      "age": 25,
      "appearance": "ê¸´ ê²€ì€ ë¨¸ë¦¬, ë°ì€ ëˆˆë™ì",
      "personality": "í™œë°œí•˜ê³  ê¸ì •ì ì¸",
      "role": "ì£¼ì¸ê³µ",
      "voice_id": "xi3rF0t7dg7uN2M0WUhr"
    }
  ]
}
```

#### layout.json (í•µì‹¬ í•„ë“œ)
- `mode`: "story" | "general" | "ad"
- `characters`: ìºë¦­í„° ëª©ë¡
- `scenes`: ì¥ë©´ë³„ ì´ë¯¸ì§€/í…ìŠ¤íŠ¸/ì˜¤ë””ì˜¤ ìŠ¬ë¡¯
- `timeline`: ì „ì²´ íƒ€ì„ë¼ì¸ ì •ë³´
- `global_bgm`: ë°°ê²½ìŒì•… ë©”íƒ€ë°ì´í„°
- `metadata`: ì¶”ê°€ ì„¤ì • (title, bgm_prompt, review_mode)

### í™˜ê²½ ë³€ìˆ˜ (.env)
```bash
# Database
DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/kurz_studio_ai

# JWT
SECRET_KEY=your-super-secret-key-here
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# LLM
GEMINI_API_KEY=AI...

# TTS
ELEVENLABS_API_KEY=sk_...

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379

# Server
API_HOST=0.0.0.0
API_PORT=8000
ENV=dev
```

---

## ì°¸ê³  ìë£Œ

### ê¸°ìˆ  ë¬¸ì„œ
- [Google Gemini API](https://ai.google.dev/gemini-api/docs) - LLM & Image Generation
- [ElevenLabs API](https://elevenlabs.io/docs) - TTS & Music
- [FastAPI](https://fastapi.tiangolo.com/) - Backend Framework
- [SQLAlchemy 2.0](https://docs.sqlalchemy.org/en/20/) - ORM
- [Alembic](https://alembic.sqlalchemy.org/) - Database Migrations
- [Celery](https://docs.celeryq.dev/) - Task Queue
- [FFmpeg](https://ffmpeg.org/documentation.html) - Video Rendering
- [PostgreSQL](https://www.postgresql.org/docs/) - Database

### í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¤ê³„
- **Finite State Machine (FSM)**: ì›Œí¬í”Œë¡œìš° ìƒíƒœ ê´€ë¦¬
- **Celery Chord Pattern**: ë³‘ë ¬ ì‘ì—… â†’ ì½œë°± êµ¬ì¡°
- **Multi-Agent Orchestration**: ì—­í•  ë¶„ë‹´í˜• Agent ì„¤ê³„
- **Schema Validation**: Pydanticì„ í™œìš©í•œ ë°ì´í„° ê²€ì¦
- **JWT Authentication**: í† í° ê¸°ë°˜ ì¸ì¦
- **Async SQLAlchemy**: ë¹„ë™ê¸° ë°ì´í„°ë² ì´ìŠ¤ ì²˜ë¦¬

---

## ìµœì¢… ì‚°ì¶œë¬¼

### 1. ì™„ì„±ëœ ì˜ìƒ
- **í¬ë§·**: MP4 (H.264 video + AAC audio)
- **í•´ìƒë„**: 1080x1920 (9:16 ì„¸ë¡œí˜•)
- **í”„ë ˆì„ë ˆì´íŠ¸**: 30fps
- **ë¹„íŠ¸ë ˆì´íŠ¸**: Video ~2Mbps, Audio 192kbps
- **ì €ì¥ ìœ„ì¹˜**: `backend/app/data/outputs/{run_id}/final_video.mp4`

### 2. ì¤‘ê°„ Artifacts
- `characters.json`: ìºë¦­í„° ì •ì˜
- `plot.json`: LLM ìƒì„± ì‹œë‚˜ë¦¬ì˜¤
- `plot.csv`: ì‚¬ìš©ì ê²€ìˆ˜ìš© CSV
- `layout.json`: ë Œë”ë§ìš© ë ˆì´ì•„ì›ƒ
- `images/`: ìƒì„±ëœ ì´ë¯¸ì§€ íŒŒì¼ë“¤
- `audio/`: TTS + BGM íŒŒì¼ë“¤
- `frames/`: FFmpeg ë Œë”ë§ í”„ë ˆì„ ì´ë¯¸ì§€

### 3. ë°ì´í„°ë² ì´ìŠ¤ ë ˆì½”ë“œ
- User í…Œì´ë¸”: ì‚¬ìš©ì ì •ë³´
- Run í…Œì´ë¸”: ì˜ìƒ ìƒì„± ì´ë ¥
  - ìƒíƒœ, ì§„í–‰ë¥ , ê²°ê³¼ URL ì €ì¥
  - ì‚¬ìš©ìë³„ ìƒì„± ì´ë ¥ ì¶”ì 

---

## ì•Œë ¤ì§„ ì´ìŠˆ

1. **Gemini API Rate Limit**: ì´ë¯¸ì§€ ìƒì„± ì‹œ 429 ì—ëŸ¬ ë°œìƒ ê°€ëŠ¥ â†’ ì¬ì‹œë„ ë¡œì§ êµ¬í˜„ë¨
2. **ElevenLabs í•œêµ­ì–´ ë°œìŒ**: ì¼ë¶€ ë‹¨ì–´ ë¶€ì •í™• â†’ í…ìŠ¤íŠ¸ ì „ì²˜ë¦¬ í•„ìš”
3. **FFmpeg ë©”ëª¨ë¦¬**: ë§¤ìš° ê¸´ ì˜ìƒ(50+ ì”¬) ìƒì„± ì‹œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°€ ê°€ëŠ¥

---

## ê¸°ì—¬í•˜ê¸°

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'feat: Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

---

## ë¼ì´ì„ ìŠ¤

This project is licensed under the MIT License.

---

## Contact

í”„ë¡œì íŠ¸ ê´€ë ¨ ë¬¸ì˜: [ì´ë©”ì¼ ë˜ëŠ” ì´ìŠˆ íŠ¸ë˜ì»¤]

**Project Link**: [GitHub Repository URL]
