# Kurz AI Studio ğŸ¬

## LLM Agent ê¸°ë°˜ AI ìˆí¼ ì˜ìƒ ìë™ ì œì‘ ì„œë¹„ìŠ¤

Kurz AI StudioëŠ” ì‚¬ìš©ì í”„ë¡¬í”„íŠ¸ë¥¼ ì…ë ¥ë°›ì•„ ìŠ¤í† ë¦¬ ê¸°íš, ì´ë¯¸ì§€ ìƒì„±, ìŒì„± í•©ì„±, ë°°ê²½ìŒì•… ì‘ê³¡, ì˜ìƒ í•©ì„±ê¹Œì§€ ì™„ì „ ìë™ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” AI ê¸°ë°˜ ìˆí¼ ì˜ìƒ ì œì‘ íŒŒì´í”„ë¼ì¸ì…ë‹ˆë‹¤.

---

## ğŸ“‹ ëª©ì°¨

- [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
- [ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
- [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
- [ìµœê·¼ ì—…ë°ì´íŠ¸](#ìµœê·¼-ì—…ë°ì´íŠ¸)
- [ì‹œì‘í•˜ê¸°](#ì‹œì‘í•˜ê¸°)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#í”„ë¡œì íŠ¸-êµ¬ì¡°)
- [ì›Œí¬í”Œë¡œìš°](#ì›Œí¬í”Œë¡œìš°)
- [ëª¨ë“œë³„ íŠ¹ì§•](#ëª¨ë“œë³„-íŠ¹ì§•)
- [Rules & Guidelines](#rules--guidelines)

---

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

### ì£¼ì œ
**LLM Agent ê¸°ë°˜ AI ìˆí¼ ì˜ìƒ ìë™ ì œì‘ ì„œë¹„ìŠ¤**

### ë°°ê²½
- ìˆí¼ ì½˜í…ì¸  ìˆ˜ìš” ê¸‰ì¦: YouTube Shorts, Instagram Reels, TikTok ë“±
- ì˜ìƒ ì œì‘ì— í•„ìš”í•œ ê¸°íš, ë””ìì¸, í¸ì§‘, ì„±ìš°, ìŒì•… ì‘ì—…ì˜ ì‹œê°„/ë¹„ìš© ë¶€ë‹´
- GPT-4, Gemini, ElevenLabs ë“± ìƒì„±í˜• AI ê¸°ìˆ ì˜ ë°œì „

### í•µì‹¬ ëª©í‘œ
1. **í”„ë¡¬í”„íŠ¸ â†’ ì™„ì„± ì˜ìƒ** ì›ìŠ¤í†± ìë™í™”
2. **ë‹¤ì¤‘ Agent í˜‘ì—…** êµ¬ì¡°: ê¸°íšì â†’ ë””ìì´ë„ˆ, ì‘ê³¡ê°€, ì„±ìš° â†’ ê°ë… â†’ QA
3. **3ê°€ì§€ ëª¨ë“œ ì§€ì›**: Story Mode (ìºë¦­í„° ì¤‘ì‹¬), General Mode (ì¼ë°˜ ì˜ìƒ), Ad Mode (ê´‘ê³ )
4. **í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜**: ëª¨ë“ˆí˜• ì„¤ê³„ + Celery ë¹„ë™ê¸° ì²˜ë¦¬

---

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### 1. Story Mode (ìŠ¤í† ë¦¬ ëª¨ë“œ)
- ì‚¬ìš©ìê°€ ìºë¦­í„°ë¥¼ ì •ì˜í•˜ê³  ìŠ¤í† ë¦¬ ì§„í–‰
- ìºë¦­í„° ì´ˆìƒí™”(2:3) + ë°°ê²½ ì´ë¯¸ì§€(9:16) ë¶„ë¦¬ ë Œë”ë§
- ë°°ê²½ íˆ¬ëª…í™”(rembg) ì ìš©
- ìºë¦­í„°ë³„ ìŒì„±, í‘œì •, í¬ì¦ˆ ì œì–´
- **ìë§‰**: í°ìƒ‰ ê¸€ì + ê²€ì€ìƒ‰ í…Œë‘ë¦¬ (ì–´ë‘ìš´ ë°°ê²½ì— ìµœì í™”)

### 2. General Mode (ì¼ë°˜ ëª¨ë“œ) âœ¨ NEW
- í”„ë¡¬í”„íŠ¸ë§Œìœ¼ë¡œ ìë™ ì‹œë‚˜ë¦¬ì˜¤ ìƒì„±
- **ì •ë°©í˜•(1:1, 1080x1080) í†µí•© ì´ë¯¸ì§€** ìƒì„±
- **ì™„ì „í•œ í°ìƒ‰ ë°°ê²½(#FFFFFF)** + íˆ¬ëª…í™” ì—†ìŒ
- **ê²€ì€ìƒ‰ ìë§‰ + í°ìƒ‰ í…Œë‘ë¦¬** (í° ë°°ê²½ì— ìµœì í™”)
- **ìë™ ì¤„ë°”ê¿ˆ**: í™”ë©´ ë„ˆë¹„ì˜ 90% ë‚´ì—ì„œ ìë™ í…ìŠ¤íŠ¸ ë©í•‘
- ê°„ê²°í•œ ìŠ¤í‚¤ë§ˆë¡œ ë¹ ë¥¸ ìƒì„±

### 3. Ad Mode (ê´‘ê³  ëª¨ë“œ)
- ì œí’ˆ/ì„œë¹„ìŠ¤ í™ë³´ìš© ì˜ìƒ ìƒì„±
- General Modeì™€ ë™ì¼í•œ íŒŒì´í”„ë¼ì¸
- ê´‘ê³  íŠ¹í™” í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§

### 4. ìë™í™”ëœ Asset ìƒì„±
- **ì´ë¯¸ì§€**: Gemini Flash 2.0 Experimental (Nano Banana)
- **ìŒì„±**: ElevenLabs TTS (í•œêµ­ì–´ ì§€ì›)
- **ë°°ê²½ìŒì•…**: ElevenLabs Sound Effects / Mubert
- **ì˜ìƒ í•©ì„±**: MoviePy (9:16 ì„¸ë¡œí˜•, 30fps)

### 5. QA Agent
- ìƒì„±ëœ ì˜ìƒ ìë™ ê²€ìˆ˜
- ì˜¤ë””ì˜¤/ë¹„ë””ì˜¤/ì´ë¯¸ì§€ í’ˆì§ˆ ì²´í¬
- ì¬ìƒì„± ë¡œì§ (ìµœëŒ€ 3íšŒ)

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **Framework**: FastAPI (Python 3.11+)
- **Task Queue**: Celery + Redis (gevent pool, concurrency=10)
- **LLM**: OpenAI GPT-4o-mini
- **Image Generation**: Google Gemini Flash 2.0 Experimental
- **TTS**: ElevenLabs API
- **Music**: ElevenLabs Sound Effects / Mubert
- **Video**: MoviePy
- **State Management**: Redis (FSM ì €ì¥)
- **Background Removal**: rembg (U2Net) - Story Modeë§Œ ì‚¬ìš©

### Frontend
- **Framework**: React + TypeScript + Vite
- **UI**: Tailwind CSS
- **State Management**: React Hooks
- **Real-time**: WebSocket (progress updates)

### Infrastructure
- **Containerization**: Docker (optional)
- **Storage**: Local filesystem (app/data/outputs)
- **Queue Broker**: Redis

---

## ğŸ†• ìµœê·¼ ì—…ë°ì´íŠ¸ (2025-11-07)

### General Mode í”„ë¡œí† íƒ€ì… ì™„ì„±
1. **ì¼ë°˜ ëª¨ë“œ í”„ë¡ íŠ¸ì—”ë“œ ì¶”ê°€**
   - `frontend/src/components/RunForm.tsx`: ì¼ë°˜ ëª¨ë“œ ì˜µì…˜ ì¶”ê°€
   - ëª¨ë“œ ì„ íƒ: General (ì¼ë°˜) / Story (ìŠ¤í† ë¦¬í…”ë§) / Ad (ê´‘ê³ )

2. **ë°±ì—”ë“œ ìŠ¤í‚¤ë§ˆ ìˆ˜ì •**
   - `backend/app/schemas/json_layout.py`:
     - `mode` Literalì— "general" ì¶”ê°€
     - `ImageSlot`ì— `image_prompt`, `aspect_ratio`, `background` í•„ë“œ ì¶”ê°€

3. **ì¼ë°˜ ëª¨ë“œ ë Œë”ë§ ë¡œì§**
   - `backend/app/tasks/director.py`:
     - **ì™„ì „í•œ í°ìƒ‰ ë°°ê²½**: `(255, 255, 255)` RGB
     - **ê²€ì€ìƒ‰ ìë§‰**: í° ë°°ê²½ì— ì˜ ë³´ì´ë„ë¡ ìƒ‰ìƒ ë°˜ì „
     - **ìë™ ì¤„ë°”ê¿ˆ**: `method='caption'`, í™”ë©´ ë„ˆë¹„ì˜ 90% ì œí•œ
   - 1:1 ì´ë¯¸ì§€ ì¤‘ì•™ ë°°ì¹˜

4. **ë””ìì´ë„ˆ íƒœìŠ¤í¬ ê°œì„ **
   - `backend/app/tasks/designer.py`:
     - General Modeìš© 1:1 ì´ë¯¸ì§€ ìƒì„± (1080x1080)
     - ì”¬ ì´ë¯¸ì§€ ìºì‹± ë° ì¬ì‚¬ìš© ë¡œì§
     - ë°°ê²½ ì œê±°(rembg) ë¹„í™œì„±í™”

5. **JSON ë³€í™˜ ë¡œì§**
   - `backend/app/utils/json_converter.py`:
     - General/Ad Modeìš© ë‹¨ìˆœ ìŠ¤í‚¤ë§ˆ (`image_prompt` + `speaker`)
     - Story Modeìš© ë³µì¡ ìŠ¤í‚¤ë§ˆ (`char1_id` + `char2_id` + ìœ„ì¹˜/í‘œì •/í¬ì¦ˆ)
     - ëª¨ë“œ ìë™ ê°ì§€

6. **í”Œë¡¯ ìƒì„±**
   - `backend/app/utils/plot_generator.py`:
     - General Mode ì „ìš© í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
     - `bgm_prompt` ë©”íƒ€ë°ì´í„° ìƒì„±

7. **QA ê²€ì¦**
   - `backend/app/tasks/qa.py`:
     - `image_slots` â†’ `images` í•„ë“œëª… ìˆ˜ì •

### ë””ë²„ê¹… ê°œì„ 
- `backend/app/providers/images/gemini_image_client.py`:
  - Gemini API ì‘ë‹µ ë¡œê¹… ë ˆë²¨ì„ `logger.info()`ë¡œ ë³€ê²½
  - Stub ì´ë¯¸ì§€ ìƒì„± ì›ì¸ ì¶”ì  ê°€ëŠ¥

---

## ğŸš€ ì‹œì‘í•˜ê¸°

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­
```bash
# Python 3.11+
python --version

# Redis
redis-server --version

# Node.js 18+
node --version
```

### í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
`.env.example`ì„ ë³µì‚¬í•˜ì—¬ `.env` íŒŒì¼ ìƒì„±:
```bash
cp .env.example .env
```

í•„ìˆ˜ API í‚¤ ì„¤ì •:
```env
OPENAI_API_KEY=your_openai_api_key
GOOGLE_API_KEY=your_gemini_api_key
ELEVENLABS_API_KEY=your_elevenlabs_api_key
```

### ë°±ì—”ë“œ ì‹¤í–‰
```bash
cd backend

# ê°€ìƒ í™˜ê²½ ìƒì„± ë° í™œì„±í™”
python -m venv kvenv
source kvenv/bin/activate  # Windows: kvenv\Scripts\activate

# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# Redis ì‹¤í–‰ (ë³„ë„ í„°ë¯¸ë„)
redis-server

# Celery ì›Œì»¤ ì‹¤í–‰ (ë³„ë„ í„°ë¯¸ë„)
source kvenv/bin/activate
celery -A app.celery_app worker --loglevel=info --pool=gevent --concurrency=10

# FastAPI ì„œë²„ ì‹¤í–‰
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰
```bash
cd frontend

# ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev
```

ì ‘ì†: `http://localhost:5173`

---

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
Kurz_Studio_AI/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ main.py              # FastAPI ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ celery_app.py        # Celery ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ config.py            # í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ tasks/               # Celery íƒœìŠ¤í¬
â”‚   â”‚   â”‚   â”œâ”€â”€ plan.py          # ê¸°íšì: í”Œë¡¯ & ìºë¦­í„° ìƒì„±
â”‚   â”‚   â”‚   â”œâ”€â”€ designer.py      # ë””ìì´ë„ˆ: ì´ë¯¸ì§€ ìƒì„±
â”‚   â”‚   â”‚   â”œâ”€â”€ composer.py      # ì‘ê³¡ê°€: BGM ìƒì„±
â”‚   â”‚   â”‚   â”œâ”€â”€ voice.py         # ì„±ìš°: TTS ìƒì„±
â”‚   â”‚   â”‚   â”œâ”€â”€ director.py      # ê°ë…: ì˜ìƒ í•©ì„±
â”‚   â”‚   â”‚   â””â”€â”€ qa.py            # QA: í’ˆì§ˆ ê²€ìˆ˜
â”‚   â”‚   â”œâ”€â”€ orchestrator/        # FSM ìƒíƒœ ê´€ë¦¬
â”‚   â”‚   â”‚   â””â”€â”€ fsm.py
â”‚   â”‚   â”œâ”€â”€ providers/           # ì™¸ë¶€ API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ images/          # Gemini
â”‚   â”‚   â”‚   â”œâ”€â”€ tts/             # ElevenLabs TTS
â”‚   â”‚   â”‚   â””â”€â”€ music/           # ElevenLabs Music
â”‚   â”‚   â”œâ”€â”€ schemas/             # Pydantic ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â”‚   â””â”€â”€ json_layout.py
â”‚   â”‚   â””â”€â”€ utils/               # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚       â”œâ”€â”€ plot_generator.py
â”‚   â”‚       â””â”€â”€ json_converter.py
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ RunForm.tsx      # ì˜ìƒ ìƒì„± í¼
â”‚   â”‚   â”‚   â””â”€â”€ RunStatus.tsx    # ì§„í–‰ ìƒí™© í‘œì‹œ
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â””â”€â”€ main.tsx
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”œâ”€â”€ voices.json                   # ElevenLabs ìŒì„± ì„¤ì •
â”œâ”€â”€ README.md
â””â”€â”€ claude.md                     # ì´ íŒŒì¼
```

---

## ğŸ¬ ì›Œí¬í”Œë¡œìš°

### ì „ì²´ íŒŒì´í”„ë¼ì¸
```
[ì‚¬ìš©ì í”„ë¡¬í”„íŠ¸]
    â†“
[IDLE â†’ PLOT_GENERATION]
    â”œâ”€ GPT-4o-mini: characters.json ìƒì„±
    â””â”€ GPT-4o-mini: plot.json ìƒì„±
    â†“
[json_converter: layout.json ë³€í™˜]
    â”œâ”€ Story Mode: char1_id/char2_id ìŠ¤í‚¤ë§ˆ
    â””â”€ General/Ad Mode: image_prompt ìŠ¤í‚¤ë§ˆ
    â†“
[ASSET_GENERATION] (ë³‘ë ¬ ì‹¤í–‰)
    â”œâ”€ Designer: Gemini ì´ë¯¸ì§€ ìƒì„±
    â”œâ”€ Composer: ElevenLabs BGM ìƒì„±
    â””â”€ Voice: ElevenLabs TTS ìƒì„±
    â†“
[RENDERING]
    â””â”€ Director: MoviePy ì˜ìƒ í•©ì„±
    â†“
[QA]
    â”œâ”€ Pass â†’ END
    â””â”€ Fail â†’ PLOT_GENERATION (ì¬ì‹œë„)
```

### ëª¨ë“œë³„ ì°¨ì´ì 

| í•­ëª© | Story Mode | General Mode | Ad Mode |
|------|------------|--------------|---------|
| **ì´ë¯¸ì§€ êµ¬ì„±** | ìºë¦­í„°(2:3) + ë°°ê²½(9:16) | í†µí•© ì´ë¯¸ì§€(1:1) | í†µí•© ì´ë¯¸ì§€(1:1) |
| **ë°°ê²½ìƒ‰** | ì–´ë‘ìš´ ë°°ê²½ (20, 20, 40) | í°ìƒ‰ (255, 255, 255) | í°ìƒ‰ (255, 255, 255) |
| **ìë§‰ ìƒ‰ìƒ** | í°ìƒ‰ + ê²€ì€ í…Œë‘ë¦¬ | ê²€ì€ìƒ‰ + í° í…Œë‘ë¦¬ | ê²€ì€ìƒ‰ + í° í…Œë‘ë¦¬ |
| **ë°°ê²½ ì œê±°** | rembg ì‚¬ìš© | ì‚¬ìš© ì•ˆ í•¨ | ì‚¬ìš© ì•ˆ í•¨ |
| **JSON ìŠ¤í‚¤ë§ˆ** | `char1_id`, `char2_id`, `pos`, `expression`, `pose` | `image_prompt`, `speaker` | `image_prompt`, `speaker` |
| **í”„ë¡¬í”„íŠ¸** | ìºë¦­í„° ì¤‘ì‹¬ ìŠ¤í† ë¦¬ | ì¼ë°˜ ì˜ìƒ | ê´‘ê³  íŠ¹í™” |

---

## ğŸ“Š ëª¨ë“œë³„ ìƒì„¸ ì„¤ëª…

### Story Mode (ìŠ¤í† ë¦¬ ëª¨ë“œ)
**ì‚¬ìš© ì‚¬ë¡€**: ìºë¦­í„° ê¸°ë°˜ ìŠ¤í† ë¦¬í…”ë§, ì›¹íˆ° ìŠ¤íƒ€ì¼ ì˜ìƒ, êµìœ¡ ì½˜í…ì¸ 

**íŠ¹ì§•**:
- ì‚¬ìš©ìê°€ ìºë¦­í„°(ì´ë¦„, ì™¸í˜•, ì„±ê²©)ë¥¼ ì •ì˜
- ê° ì”¬ë§ˆë‹¤ ìµœëŒ€ 2ëª…ì˜ ìºë¦­í„° ë°°ì¹˜ ê°€ëŠ¥
- ìœ„ì¹˜: `left`, `center`, `right`
- í‘œì •: `happy`, `sad`, `angry`, `surprised`, `neutral`, `excited`, `confident`
- í¬ì¦ˆ: `standing`, `sitting`, `walking`, `pointing`
- ë°°ê²½ ì´ë¯¸ì§€ì™€ ìºë¦­í„° ì´ë¯¸ì§€ ë¶„ë¦¬ ìƒì„±
- rembgë¡œ ìºë¦­í„° ë°°ê²½ ì œê±° í›„ í•©ì„±

**JSON êµ¬ì¡°**:
```json
{
  "mode": "story",
  "scenes": [{
    "scene_id": "scene_1",
    "char1_id": "char_1",
    "char1_pos": "left",
    "char1_expression": "happy",
    "char1_pose": "standing",
    "char2_id": "char_2",
    "char2_pos": "right",
    "char2_expression": "surprised",
    "char2_pose": "standing",
    "speaker": "char_1",
    "text": "ëŒ€ì‚¬ ë‚´ìš©",
    "background_img": "sunny park with trees"
  }]
}
```

### General Mode (ì¼ë°˜ ëª¨ë“œ)
**ì‚¬ìš© ì‚¬ë¡€**: ì¼ë°˜ ì„¤ëª… ì˜ìƒ, íŠœí† ë¦¬ì–¼, ë¸Œì´ë¡œê·¸ ìŠ¤íƒ€ì¼

**íŠ¹ì§•**:
- í”„ë¡¬í”„íŠ¸ë§Œ ì…ë ¥í•˜ë©´ ìë™ìœ¼ë¡œ ì‹œë‚˜ë¦¬ì˜¤ ìƒì„±
- ì”¬ë‹¹ 1ì¥ì˜ í†µí•© ì´ë¯¸ì§€ (ìºë¦­í„° + ë°°ê²½ í†µí•©)
- 1:1 ì •ë°©í˜• ì´ë¯¸ì§€ (1080x1080)
- ì™„ì „í•œ í°ìƒ‰ ë°°ê²½
- ê²€ì€ìƒ‰ ìë§‰ (ê°€ë…ì„± ìµœì í™”)
- í™”ë©´ ë„ˆë¹„ 90% ë‚´ ìë™ ì¤„ë°”ê¿ˆ
- ì´ë¯¸ì§€ ì¬ì‚¬ìš©: `image_prompt`ë¥¼ ë¹ˆ ë¬¸ìì—´ `""`ë¡œ ì„¤ì •í•˜ë©´ ì´ì „ ì´ë¯¸ì§€ ì¬ì‚¬ìš©

**JSON êµ¬ì¡°**:
```json
{
  "mode": "general",
  "scenes": [{
    "scene_id": "scene_1",
    "image_prompt": "ê·€ì—¬ìš´ ê³ ì–‘ì´ê°€ ì›ƒìœ¼ë©° ì†ì„ í”ë“œëŠ” ëª¨ìŠµ, ë°ì€ í–‡ì‚´",
    "speaker": "char_1",
    "text": "ì•ˆë…•í•˜ì„¸ìš”!",
    "duration_ms": 5000
  }, {
    "scene_id": "scene_2",
    "image_prompt": "",  // ì´ì „ ì´ë¯¸ì§€ ì¬ì‚¬ìš©
    "speaker": "narration",
    "text": "í•´ì„¤ ë‚´ìš©",
    "duration_ms": 4000
  }],
  "metadata": {
    "bgm_prompt": "upbeat, cheerful, acoustic guitar"
  }
}
```

### Ad Mode (ê´‘ê³  ëª¨ë“œ)
**ì‚¬ìš© ì‚¬ë¡€**: ì œí’ˆ í™ë³´, ì„œë¹„ìŠ¤ ì†Œê°œ, ë¸Œëœë“œ ì˜ìƒ

**íŠ¹ì§•**:
- General Modeì™€ ë™ì¼í•œ ê¸°ìˆ  ìŠ¤íƒ
- ê´‘ê³  íŠ¹í™” í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§
- ì œí’ˆ/ì„œë¹„ìŠ¤ ê°•ì¡°

---

## ğŸ“ Rules & Guidelines

### ì½”ë”© ì»¨ë²¤ì…˜
- **Python**: PEP 8, Type Hints ì‚¬ìš©
- **TypeScript**: ESLint + Prettier
- **ì»¤ë°‹ ë©”ì‹œì§€**: Conventional Commits í˜•ì‹
  ```
  feat: Add general mode to frontend
  fix: Fix QA stage field name (image_slots â†’ images)
  refactor: Update director subtitle color by mode
  ```

### Agent ì—­í•  ë¶„ë‹´
1. **Plan Agent**: GPTë¡œ ìºë¦­í„° + í”Œë¡¯ ìƒì„±
2. **Designer Agent**: Geminië¡œ ì´ë¯¸ì§€ ìƒì„±
3. **Composer Agent**: ElevenLabs/Mubertë¡œ BGM ìƒì„±
4. **Voice Agent**: ElevenLabs TTSë¡œ ìŒì„± ìƒì„±
5. **Director Agent**: MoviePyë¡œ ì˜ìƒ í•©ì„±
6. **QA Agent**: í’ˆì§ˆ ê²€ì¦ ë° ì¬ìƒì„± ë¡œì§

### ìƒíƒœ ê´€ë¦¬ (FSM)
```python
class RunState(Enum):
    IDLE = "IDLE"
    PLOT_GENERATION = "PLOT_GENERATION"
    ASSET_GENERATION = "ASSET_GENERATION"
    RENDERING = "RENDERING"
    QA = "QA"
    END = "END"
    FAILED = "FAILED"
```

### ì—ëŸ¬ ì²˜ë¦¬
- ëª¨ë“  íƒœìŠ¤í¬ëŠ” ì‹¤íŒ¨ ì‹œ FSMì— `FAILED` ìƒíƒœ ê¸°ë¡
- QA ì‹¤íŒ¨ ì‹œ ìµœëŒ€ 3íšŒê¹Œì§€ PLOT_GENERATIONë¶€í„° ì¬ì‹œë„
- Gemini API ì‹¤íŒ¨ ì‹œ stub ì´ë¯¸ì§€ë¡œ í´ë°± (70ë°”ì´íŠ¸ 1x1 PNG)

---

## ğŸ”§ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### Stub ì´ë¯¸ì§€ ìƒì„± ë¬¸ì œ
**ì¦ìƒ**: ìƒì„±ëœ ì´ë¯¸ì§€ê°€ 70ë°”ì´íŠ¸ì˜ 1x1 í”½ì…€ ì´ë¯¸ì§€

**ì›ì¸**:
1. Gemini API í• ë‹¹ëŸ‰ ì´ˆê³¼ (ë¬´ë£Œ í‹°ì–´: ë¶„ë‹¹ 15 ìš”ì²­, ì¼ì¼ 1500 ìš”ì²­)
2. í”„ë¡¬í”„íŠ¸ê°€ ì•ˆì „ì„± í•„í„°ì— ê±¸ë¦¼
3. API ì‘ë‹µì— ì´ë¯¸ì§€ ë°ì´í„° ì—†ìŒ

**í•´ê²°**:
- Gemini API ì‘ë‹µ ë¡œê·¸ í™•ì¸ (`logger.info` ë ˆë²¨)
- API í‚¤ í• ë‹¹ëŸ‰ í™•ì¸
- í”„ë¡¬í”„íŠ¸ ìˆ˜ì •

### Celery ì›Œì»¤ ì¬ì‹œì‘
```bash
# ëª¨ë“  ì›Œì»¤ ì¢…ë£Œ
pkill -9 -f "celery.*worker"

# ìƒˆ ì›Œì»¤ ì‹œì‘
cd backend
source kvenv/bin/activate
celery -A app.celery_app worker --loglevel=info --pool=gevent --concurrency=10
```

### Redis ì—°ê²° ì‹¤íŒ¨
```bash
# Redis ì‹¤í–‰ í™•ì¸
redis-cli ping
# ì‘ë‹µ: PONG

# Redis ì„œë²„ ì‹œì‘
redis-server
```

---

## ğŸ“ ê°œë°œ íˆìŠ¤í† ë¦¬

### 2025-11-07
- âœ… General Mode í”„ë¡œí† íƒ€ì… ì™„ì„±
- âœ… í°ìƒ‰ ë°°ê²½ + ê²€ì€ìƒ‰ ìë§‰ êµ¬í˜„
- âœ… ìë™ ì¤„ë°”ê¿ˆ ì ìš©
- âœ… QA í•„ë“œëª… ë²„ê·¸ ìˆ˜ì • (`image_slots` â†’ `images`)
- âœ… Gemini API ì‘ë‹µ ë¡œê¹… ê°œì„ 
- âœ… í”„ë¡œì íŠ¸ëª… ë³€ê²½: AutoShorts â†’ Kurz AI Studio

### ì´ì „ ì‘ì—…
- Story Mode êµ¬í˜„
- Celery + Redis ë¹„ë™ê¸° ì²˜ë¦¬
- FSM ìƒíƒœ ê´€ë¦¬
- Multi-Agent ì•„í‚¤í…ì²˜ ì„¤ê³„

---

## ğŸ¯ í–¥í›„ ê³„íš

### Short-term
- [ ] General Mode í…ŒìŠ¤íŠ¸ ë° ë²„ê·¸ ìˆ˜ì •
- [ ] Gemini API í• ë‹¹ëŸ‰ ê´€ë¦¬
- [ ] í”„ë¡¬í”„íŠ¸ ìµœì í™”

### Mid-term
- [ ] í”„ë¡ íŠ¸ì—”ë“œ UI/UX ê°œì„ 
- [ ] ì˜ìƒ ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥
- [ ] ì‚¬ìš©ì í”¼ë“œë°± ì‹œìŠ¤í…œ

### Long-term
- [ ] í´ë¼ìš°ë“œ ë°°í¬ (AWS/GCP)
- [ ] ì‚¬ìš©ì ì¸ì¦ ì‹œìŠ¤í…œ
- [ ] ë‹¤êµ­ì–´ ì§€ì› í™•ëŒ€

---

## ğŸ“„ License

This project is licensed under the MIT License.

---

## ğŸ‘¥ Contact

í”„ë¡œì íŠ¸ ê´€ë ¨ ë¬¸ì˜: [ì´ë©”ì¼ ë˜ëŠ” ì´ìŠˆ íŠ¸ë˜ì»¤]

**Project Repository**: [GitHub URL]

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-11-07
**ë²„ì „**: 1.0.0-alpha (General Mode Prototype)
